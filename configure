#! /bin/sh
cp -f VERSION cfg/autoconf/VERSION
cd cfg/autoconf
echo 'WARNING: configure support will be deprecated one time, consider switching to cmake'
echo 'More information about cmake is available at <http://www.cmake.org>.'
if [ ! -f ./configure -o "x$1" = "x--regenerate" -o ./configure.in -nt ./configure ] ; then
    echo "Running autoconf..."
    if ! type autoconf > /dev/null 2>&1 ; then
        echo "Please install autoconf"
        exit 1
    fi
    autoconf
    test "x$1" = "x--regenerate" && shift
fi
if ./configure "$@" ; then
    if [ "$1" = "--help" ]
    then
        echo
        echo "Use --regenerate as first parameter regenerate configure script"
    else
        mv -f Makefile.cfg ../Makefile.cfg
        mv -f config.h ../config.h
    fi
fi
